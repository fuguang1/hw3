# 数字图像处理第三次作业 #

班级姓名：自动化64李明哲</br>
学号：2160504096</br>
提交日期：03.18

## 摘要 ##

本次实验的目的为对图像进行直方图增强，在实验中实现了许多基本的功能，比如做出图像的直方图，用直方图均衡和直方图匹配进行直方图增强，例如用源图像的直方图作为匹配模板，对受到不同程度损失的图像进行恢复。随后对图像实现了局部直方图增强，最后基于阈值分割法对部分图像进行了图像分割。

### 关键词：直方图增强，直方图匹配，局部直方图增强，图像分割。 ###

### 1. 画出附件的直方图 ###

##### a.操作 #####

本次试验中，每一组图像的像素强度值均相同，而调色版不相同，再用imread读图像时需要把强度值和调色板一起读出来，把图像转化为二值图像，本次实验我采用手动匹配调色板的操作，每组图像的第一幅图像为标准灰度图像的调色板，通过对每一组内的其他图像每一强度值对应的调色板中的值与标准调色板中的值的对应情况，把其他图像的强度值转化为标准调色板下的强度值。再用imhist和imshow函数分别显示图像的直方图和图像本身。

##### b.结果 #####

![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE_1.png)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE_2.png)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE_3.png)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE_4.png)

##### c.结论 #####

每一组图像的第一个图像为原图，是正常图像的直方图，其它图像的像素强度值要么集中在暗区域，要么集中在亮区域，要么较为平均分布，得到的图像效果并不是很好。

### 2. 直方图均衡 ###

##### a.操作 #####

直方图均衡是把灰度分布直方图平均分配（在连续情况下），在离散情况下可能有误差，采用Matlab的histeq函数可以实现。

##### b.结果 #####

![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1_1.jpg)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1_2.jpg)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1_3.jpg)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1_4.png)

##### c.结论 #####

对于图像仅仅时整体较原图暗或者亮的图片，直方图均衡的结果较好，较暗的图像可以适当变亮，较亮的图像可以适当变暗。对于整体像素强度被压缩到一个很小的范围内的图像，效果不是很好。

### 3. 直方图匹配 ###

##### a.操作 #####

直方图匹配又称为直方图规范化，目的是为了让要操作的图片的直方图和给定图片的直方图相同（连续情况下），在离散情况下可能会有些许误差。采用Matlab的histeq函数可以实现。

##### b.结果 #####

![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%8C%B9%E9%85%8D_1.png)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%8C%B9%E9%85%8D_2.png)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%8C%B9%E9%85%8D_3.png)
![](https://github.com/fuguang1/hw3/blob/master/%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%8C%B9%E9%85%8D_4.png)

##### c.结论 #####

从结果来看，直方图匹配对图像增强有一定的正面效果，可以使图像的直方图朝着任意指定的直方图模板进行改进，但是效果仍然不尽如人意，因为在离散直方图情况下，图像并不能完整的契合直方图模板，有一定的误差。

### 4. 局部直方图增强 ###

##### a.操作 #####

本次实验采用7*7的模板进行局部直方图图像增强，每次只改变模板最中间的值，步长设定为1，相当于对每一个小图像小块单独做上述操作，如直方图均衡或者直方图匹配，本次实验选择直方图均衡。

##### b.结果 #####

![](https://github.com/fuguang1/hw3/blob/master/%E5%B1%80%E9%83%A8%E5%A2%9E%E5%BC%BA.jpg)

##### c.结论 #####

经过局部直方图增强之后，图像的细节被明显突出，图像的局部特征被明显突出。但是随之而来，图像的噪声被放大，需要权衡模板的大小，做到细节被突出，噪声不会被放大太多。

### 5. 基于阈值的图像分割 ###

##### a.操作 #####

首先选择127作为阈值的初始值，进行迭代，求出亮区域（强度值大于阈值）的均值和暗区域（强度值小于阈值）的均值，将两个均值的平均值与阈值比较，如果误差过大（比如两者差大于1），就更新阈值，知道得到最终阈值结果。随后将像素强度值大于等于阈值的设为255，小于等于阈值的设为强度0，便可以得到最终分割后的图像

##### b.结果 #####

![](https://github.com/fuguang1/hw3/blob/master/%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2_1.png)
![](https://github.com/fuguang1/hw3/blob/master/%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2_2.jpg)

##### c.结论 #####

从上图结果来看，分割结果并不是特别好，原因是该算法是线性算法，对实际的非线性问题往往不能很好地解决。相比之下，第二张图（woman）的图像分割做得更好，因为图像的直方图是双峰曲线，找到的阈值点更能代表双峰曲线的谷底，所以效果更好。为了得到更好的图像分割，需要开发更好的非线性算法。

## 心得体会 ##

本次图像增强实验让我对课上学习的知识进行了一次实践。了解了Matlab中有关数字图像处理的相关基础函数，包括imhist	、imshow、histeq等函数。在使用这些函数时，一定要仔细阅读它的使用文档，了解每一个参数的意义，确保正确的使用。同时，我也对课上学习的图像增强的知识有了更深的了解，更深的了解到了各种算法的实现效果与适用情况，了解到了它们的优缺点。这些都是数字图像处理的基础方面。